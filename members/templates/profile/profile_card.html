<div class="card mb-3">
    <div class="card-body member-card">
        <div class="row profile-banner d-flex">
            {% if member.banner %}
                <img src="{{ member.banner.url }}" alt="Image Banner" class="card-img-top image-banner"/>
            {% else %}
                <img src="/media/bgs/default/default_banner.png" class="image-banner"/>
            {% endif %}
        </div>

        <div class="row">
            <img src="{{ member.avatar.url }}" alt="Avatar" class="rounded-circle mr-3 avatar"/>

            <div class="member-details">
                <div class="member-details-name d-flex justify-content-between">
                    <div class="member-details-title">
                        <p class="card-text member-name">
                            {{ member.first_name }} {{member.last_name}}
                            {% if member.is_verified %}
                                <i class="bi bi-patch-check-fill"></i>
                            {% endif %}
                        </p>
                        <p class="card-text member-nickname">@{{ member.username }}</p>
                    </div>

                    <div class="member-details-actions">
                        {% if user.is_authenticated and user.username == member.username %}
                            <a href="/members/profile/edit-profile/{{ member.username }}" class="btn btn-primary">Edit Profile</a>
                        {% else %}
                            <div class="d-flex flex-wrap gap-2">
                                {% if user.followings %}
                                    {% if member in user.followings.all %}
                                        <a href="/members/unfollow/{{ member.username }}" class="btn btn-secondary">Unfollow</a>
                                    {% else %}
                                        <a href="/members/follow/{{ member.username }}" class="btn btn-primary">Follow</a>
                                    {% endif %}
                                {% else %}
                                    <a href="/members/follow/{{ member.username }}" class="btn btn-primary">Follow</a>
                                {% endif %}
                                <a href="{% url 'dialog_detail' member.username %}" class="btn btn-outline-primary">
                                    Написати
                                </a>
                            </div>
                        {% endif %}
                    </div>
                </div>

                <div class="member-details-extras mt-1">
                    {% if member.bio %}
                        <p class="card-text member-bio">{{ member.bio }}</p>
                    {% endif %}

                    <div class="member-details-extras-short-info d-flex flex-wrap gap-3">
                        {% if member.country %}
                            <p class="card-text text-member-details-extras mb-0">
                                <i class="icon-secondary bi bi-geo-alt-fill"></i>
                                {% if member.city %}
                                    {{ member.city }},
                                {% endif %}
                                {{ member.country }}
                            </p>
                        {% endif %}

                        {% if member_age %}
                            <p class="card-text text-member-details-extras mb-0">
                                <i class="icon-secondary bi bi-cake-fill"></i>
                                {{ member_age }} років
                            </p>
                        {% endif %}

                        {% if member.gender %}
                            <p class="card-text text-member-details-extras mb-0">
                                <i class="icon-secondary bi bi-gender-ambiguous"></i>
                                {% if member.gender == 'M' %}
                                    Чоловік
                                {% elif member.gender == 'F' %}
                                    Жінка
                                {% else %}
                                    {{ member.get_gender_display }}
                                {% endif %}
                            </p>
                        {% endif %}
                    </div>
                </div>

                {% if member.relationship_status or member.relationship_goal or member.sexual_orientation or member.height_cm or member.body_type or member.education_level or member.occupation or member.company or member.languages or member.interests or member.children or member.smoking or member.drinking %}
                    <div class="member-details-extended mt-3">
                        <h6 class="text-uppercase text-muted small mb-2">Додаткова інформація</h6>
                        <dl class="row gy-2 gx-3 mb-0">
                            {% if member.relationship_status %}
                                <dt class="col-sm-5 small text-muted">Сімейний стан</dt>
                                <dd class="col-sm-7 mb-0">{{ member.get_relationship_status_display }}</dd>
                            {% endif %}
                            {% if member.relationship_goal %}
                                <dt class="col-sm-5 small text-muted">Мета знайомства</dt>
                                <dd class="col-sm-7 mb-0">{{ member.get_relationship_goal_display }}</dd>
                            {% endif %}
                            {% if member.sexual_orientation %}
                                <dt class="col-sm-5 small text-muted">Орієнтація</dt>
                                <dd class="col-sm-7 mb-0">{{ member.get_sexual_orientation_display }}</dd>
                            {% endif %}
                            {% if member.height_cm %}
                                <dt class="col-sm-5 small text-muted">Зріст</dt>
                                <dd class="col-sm-7 mb-0">{{ member.height_cm }} см</dd>
                            {% endif %}
                            {% if member.body_type %}
                                <dt class="col-sm-5 small text-muted">Статура</dt>
                                <dd class="col-sm-7 mb-0">{{ member.get_body_type_display }}</dd>
                            {% endif %}
                            {% if member.education_level %}
                                <dt class="col-sm-5 small text-muted">Освіта</dt>
                                <dd class="col-sm-7 mb-0">{{ member.get_education_level_display }}</dd>
                            {% endif %}
                            {% if member.occupation %}
                                <dt class="col-sm-5 small text-muted">Професія</dt>
                                <dd class="col-sm-7 mb-0">{{ member.occupation }}</dd>
                            {% endif %}
                            {% if member.company %}
                                <dt class="col-sm-5 small text-muted">Місце роботи</dt>
                                <dd class="col-sm-7 mb-0">{{ member.company }}</dd>
                            {% endif %}
                            {% if member.languages %}
                                <dt class="col-sm-5 small text-muted">Мови</dt>
                                <dd class="col-sm-7 mb-0">{{ member.languages }}</dd>
                            {% endif %}
                            {% if member.interests %}
                                <dt class="col-sm-5 small text-muted">Інтереси</dt>
                                <dd class="col-sm-7 mb-0">{{ member.interests }}</dd>
                            {% endif %}
                            {% if member.children %}
                                <dt class="col-sm-5 small text-muted">Діти</dt>
                                <dd class="col-sm-7 mb-0">{{ member.get_children_display }}</dd>
                            {% endif %}
                            {% if member.smoking %}
                                <dt class="col-sm-5 small text-muted">Куріння</dt>
                                <dd class="col-sm-7 mb-0">{{ member.get_smoking_display }}</dd>
                            {% endif %}
                            {% if member.drinking %}
                                <dt class="col-sm-5 small text-muted">Алкоголь</dt>
                                <dd class="col-sm-7 mb-0">{{ member.get_drinking_display }}</dd>
                            {% endif %}
                        </dl>
                    </div>
                {% endif %}

                <div class="member-connections">
                    <p class="member-followers-title">Підписники: {{ member.followers.count }}</p>
                    <p class="member-following-title">Підписки: {{ member.followings.count }}</p>
                </div>
            </div>
        </div>
    </div>
</div>
